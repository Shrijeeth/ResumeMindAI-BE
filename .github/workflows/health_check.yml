name: Health Check

on:
  schedule:
    # Run every 6 hours
    - cron: '0 */6 * * *'
  workflow_dispatch: # Allows manual run

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping API Health Check Endpoint
        run: |
          curl -I ${{ secrets.APP_URL }}/api/health -H "x-api-key: ${{ secrets.INTERNAL_API_KEY }}" -H "Accept: application/json"

      - name: Ping Worker Health Check Endpoint
        run: |
          curl -I ${{ secrets.HF_TASKIQ_WORKER_SPACE_URL }}/health -H "Authorization: Bearer ${{ secrets.HF_TOKEN }}" -H "Accept: application/json"